<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>0023RS - 8&nbsp; temperature</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Week8.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Week9.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">temperature</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">0023RS</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting started with remote sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Portfolio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data processing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week9.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">temperature</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">8.1</span> Summary</a></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">8.2</span> Application</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">8.3</span> Reflection</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">8.4</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">temperature</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">8.1</span> Summary</h2>
<p>In today’s learning diary, I’ve chosen to write about topics related to temperature, simply because I’m more interested in it. In addition, I think it is also a very important part of remote sensing, with more than 700 articles published in the field of remote sensing surface temperature in 2020 alone.</p>
<p align="center">
</p><p><img src="fig/week9/fig1.png" alt="Alt Text" width="500"></p>
<p></p>
<p align="center">
</p><p><em>Publication statistics in the field of remote sensing-based LST, 2000-2020</em></p>
<p></p>
<p align="right">
</p><p><span class="citation" data-cites="li2023satellite">(<a href="#ref-li2023satellite" role="doc-biblioref">Li et al. 2023</a>)</span></p>
<p></p>
<p><big><strong>Definition of Satellite-Derived LST</strong></big></p>
<p>LST is the thermodynamic temperature of a thin layer in the interface between soil, vegetation or other surface components and the atmosphere. It reflects how hot or cold is the Earth’s surface would feel to the touch.</p>
<p align="center">
</p><p><img src="fig/week9/fig2.png" alt="Alt Text" width="500"></p>
<p></p>
<p align="center">
</p><p><em>Schematic of the land surface in remote sensing</em></p>
<p></p>
<p align="right">
</p><p><span class="citation" data-cites="li2023satellite">(<a href="#ref-li2023satellite" role="doc-biblioref">Li et al. 2023</a>)</span></p>
<p></p>
<p><span class="math inline">\(T_{si}\)</span>: surface temperature<br>
<span class="math inline">\(\varepsilon_{i}\)</span>: emissivity<br>
<span class="math inline">\(\alpha_{i}\)</span>: projected area weight for the ith visible component<br>
<span class="math inline">\(\theta_{v}\)</span>: VZA<br>
<span class="math inline">\(\phi_{v}\)</span>: viewing azimuth angle</p>
<p>For a given satellite sensor, the radiometric temperature can be formulated as follows<span class="citation" data-cites="chandrasekhar2013radiative dash prata1995thermal">(<a href="#ref-chandrasekhar2013radiative" role="doc-biblioref">Chandrasekhar 2013</a>; <a href="#ref-dash" role="doc-biblioref">P. Dash and Fischer 2002</a>; <a href="#ref-prata1995thermal" role="doc-biblioref">Prata et al. 1995</a>)</span>: <span class="math display">\[
T_{\mathrm{s}}\left(\theta_{v}, \varphi_{v}\right)=B_{\lambda}^{-1}\left[\frac{R_{\lambda}\left(\theta_{v}, \varphi_{v}\right)-R_{a t_{\lambda} \uparrow}\left(\theta_{v}, \varphi_{v}\right)-\tau_{\lambda}\left(\theta_{v}, \varphi_{v}\right)\left[1-\varepsilon_{\lambda}\left(\theta_{v}, \varphi_{v}\right)\right] R_{a t_{\lambda} \downarrow}}{\tau_{\lambda}\left(\theta_{v}, \varphi_{v}\right) \varepsilon_{\lambda}\left(\theta_{v}, \varphi_{v}\right)}\right]
\]</span> <span class="math inline">\(T_s\)</span>: radiometric temperature<br>
<span class="math inline">\(\theta_v\)</span>: viewing zenith angle(VZA)<br>
<span class="math inline">\(B_{\lambda }^{-1}\)</span>: inverse function of Planck’s law<br>
<span class="math inline">\(R_\lambda\)</span>, <span class="math inline">\(R_{at_{\lambda}\uparrow}\)</span> and <span class="math inline">\(_{at_{\lambda}\downarrow}\)</span>: at-sensor observed&nbsp;radiance, upward atmospheric radiance, and downward atmospheric radiance<br>
<span class="math inline">\(\tau_\lambda\)</span>: channel atmospheric transmittance<br>
<span class="math inline">\(\varepsilon_\lambda\)</span>: channel land surface emissivity(LSE)<br>
</p>
<p><big><strong>Heat Island</strong></big></p>
<p>Buildings, roads, and other man-made structures have a higher capacity to absorb and release solar radiation compared to natural features like forests and bodies of water. Consequently, urban areas, characterized by dense concentrations of such structures and limited green spaces, tend to exhibit higher temperatures than surrounding regions, forming what is known as urban heat islands (UHI). The proliferation of urban populations, coupled with the exacerbation of UHI effects and the escalating frequency and duration of heatwaves due to climate change, raise significant concerns regarding the heightened health risks faced by vulnerable urban populations during extreme heat events.</p>
<p>Remote sensing technology offers a valuable tool for monitoring the dynamics of UHI phenomena over time on a global scale. Thermal mapping derived from satellite imagery enables the tracking of land surface temperature (LST) variations, while optical data captures changes in land use and cover, aiding in the estimation of air temperatures across different urban zones. Once UHIs are identified and mapped, integrating socioeconomic data such as population demographics and health indicators into heat vulnerability indices (HVI) facilitates the identification of at-risk communities and informs targeted interventions aimed at mitigating the adverse health impacts associated with heatwaves.</p>
<p align="center">
</p><p><img src="fig/week9/fig3.png" alt="Alt Text" width="500"></p>
<p></p>
<p align="center">
</p><p><em>Land surface temperature (in K) image of Shenzhen, China</em></p>
<p></p>
<p align="right">
</p><p><span class="citation" data-cites="WANG2019168">(<a href="#ref-WANG2019168" role="doc-biblioref">Wang et al. 2019</a>)</span></p>
<p></p>
</section>
<section id="application" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="application"><span class="header-section-number">8.2</span> Application</h2>
<p>Understanding the urban heat island effect and finding ways to mitigate it has undoubtedly been the focus of environmental research in recent years. I thought I knew a lot about the heat island effect because it is, after all, one of the major problems facing China’s megacities, but the articles I found about it really surprised me, because it seems that the main factors are not just the human actions I assumed. Firstly, it is mentioned in the analysis of heat island effect that urban heat waves are transient and obviously influenced by natural environment, and high-resolution data in time and space are needed to study them <span class="citation" data-cites="buo2023generating">(<a href="#ref-buo2023generating" role="doc-biblioref">Buo, Sagris, and Jaagus 2023</a>)</span>. So a lot of research has focused on the seasonal heat island effect <span class="citation" data-cites="alma9931">(<a href="#ref-alma9931" role="doc-biblioref">Paschalis et al. 2021-06</a>)</span> or the daytime versus night heat island effect<span class="citation" data-cites="arellano">(<a href="#ref-arellano" role="doc-biblioref">Arellano and Roca 2021</a>)</span> or the geographical location of the city as the heat island effect(especially humid and arid regions)<span class="citation" data-cites="alma9931576196604761">(<a href="#ref-alma9931576196604761" role="doc-biblioref">Zhang et al. 2022-07-01</a>)</span>.</p>
<p>After learning this knowledge, I began to wonder what factors have the greatest influence on the heat island effect, and fortunately, there are some scholars who are also interested in this question:</p>
<p><span class="citation" data-cites="IMHOFF2010504">Imhoff et al. (<a href="#ref-IMHOFF2010504" role="doc-biblioref">2010</a>)</span> conducted a spatial analysis using Landsat TM-based NLCD 2001 data for impervious surface area (ISA) and MODIS data averaged over three years (2003–2005) for land surface temperature (LST) to study the urban heat island (UHI) skin temperature amplitude and its correlation with development intensity, size, and ecological setting in 38 major cities across the continental United States. Their findings revealed that the ecological context significantly influences the amplitude of summer daytime UHI, with the largest differences observed for cities situated in temperate broadleaf and mixed forest biomes. ISA was identified as the primary driver for temperature increase, explaining 70% of the total variance in LST across all cities. On average, urban areas were notably warmer than non-urban fringes by 2.9 °C, except for cities in arid and semiarid climates. The UHI amplitude exhibited seasonal asymmetry, with a higher difference in summer (4.3 °C) compared to winter (1.3 °C). In desert environments, the response of LST to ISA displayed a unique “U-shaped” horizontal gradient. The findings suggest a possible heat sink effect in certain cities. Overall, the study highlights that UHI amplitude increases with city size and varies seasonally across different biomes, particularly in forested ecosystems, indicating potential implications for residential energy consumption during summer.</p>
<p align="center">
</p><p><img src="fig/week9/fig4.png" alt="Alt Text" width="500"></p>
<p></p>
<p align="center">
</p><p><em>A&amp;B show typical layout, C shows the cities and their biomes used in this article</em></p>
<p></p>
<p>What is more interesting is that I used to think that vegetation could slow down the heat island effect because of its ability to absorb carbon dioxide, etc. In <span class="citation" data-cites="PARK2021101655">Park, Guldmann, and Liu (<a href="#ref-PARK2021101655" role="doc-biblioref">2021</a>)</span>’s article, it is actually due to the fact that trees can provide shelter for cities, thus reducing the formation of heat waves, which shows how sensitive heat waves are to the environment, so it really needs high-precision sensors to fully analyze them.</p>
</section>
<section id="reflection" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">8.3</span> Reflection</h2>
<p>Exploring the concept of UHI, I’ve realized the complex interplay between natural and anthropogenic factors in influencing urban temperature patterns. While human activities contribute to the formation of heat islands, ecological settings, such as vegetation cover and geographical location, also play significant roles. This underscores the importance of considering both natural and human-induced factors in UHI research and mitigation strategies.</p>
<p>Reflecting on the articles reviewed, I’ve gained a deeper understanding of the multifaceted nature of the UHI phenomenon and its implications for urban sustainability and public health. Moving forward, I’m intrigued to explore interdisciplinary approaches that combine remote sensing, climatology, and urban planning to develop effective strategies for mitigating the impacts of heat islands and promoting resilient cities.</p>
</section>
<section id="references" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="references"><span class="header-section-number">8.4</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-arellano" class="csl-entry" role="listitem">
Arellano, B., and J. Roca. 2021. <span>“REMOTE SENSING AND NIGHT TIME URBAN HEAT ISLAND.”</span> <em>The International Archives of Photogrammetry, Remote Sensing and Spatial Information Sciences</em>. <a href="https://www.proquest.com/conference-papers-proceedings/remote-sensing-night-time-urban-heat-island/docview/2585315470/se-2">https://www.proquest.com/conference-papers-proceedings/remote-sensing-night-time-urban-heat-island/docview/2585315470/se-2</a>.
</div>
<div id="ref-buo2023generating" class="csl-entry" role="listitem">
Buo, Ioannis, Valerio Sagris, and Jaak Jaagus. 2023. <span>“Generating Synthetic Daily Remote Sensing Products Suitable for Surface Heat Island and Heatwaves Assessments at Urban Scale.”</span> <em>International Journal of Environmental Science &amp; Technology</em> 20: 8599–8614. <a href="https://doi.org/10.1007/s13762-022-04510-3">https://doi.org/10.1007/s13762-022-04510-3</a>.
</div>
<div id="ref-chandrasekhar2013radiative" class="csl-entry" role="listitem">
Chandrasekhar, Subrahmanyan. 2013. <em>Radiative Transfer</em>. Courier Corporation.
</div>
<div id="ref-IMHOFF2010504" class="csl-entry" role="listitem">
Imhoff, Marc L., Ping Zhang, Robert E. Wolfe, and Lahouari Bounoua. 2010. <span>“Remote Sensing of the Urban Heat Island Effect Across Biomes in the Continental USA.”</span> <em>Remote Sensing of Environment</em> 114 (3): 504–13. https://doi.org/<a href="https://doi.org/10.1016/j.rse.2009.10.008">https://doi.org/10.1016/j.rse.2009.10.008</a>.
</div>
<div id="ref-li2023satellite" class="csl-entry" role="listitem">
Li, Zhao-Liang, Hua Wu, Si-Bo Duan, Wei Zhao, Huazhong Ren, Xiangyang Liu, Pei Leng, et al. 2023. <span>“Satellite Remote Sensing of Global Land Surface Temperature: Definition, Methods, Products, and Applications.”</span> <em>Reviews of Geophysics</em> 61 (1).
</div>
<div id="ref-dash" class="csl-entry" role="listitem">
P. Dash, F.-S. Olesen, F.-M. Göttsche, and H. Fischer. 2002. <span>“Land Surface Temperature and Emissivity Estimation from Passive Sensor Data: Theory and Practice-Current Trends.”</span> <em>International Journal of Remote Sensing</em> 23 (13): 2563–94. <a href="https://doi.org/10.1080/01431160110115041">https://doi.org/10.1080/01431160110115041</a>.
</div>
<div id="ref-PARK2021101655" class="csl-entry" role="listitem">
Park, Yujin, Jean-Michel Guldmann, and Desheng Liu. 2021. <span>“Impacts of Tree and Building Shades on the Urban Heat Island: Combining Remote Sensing, 3D Digital City and Spatial Regression Approaches.”</span> <em>Computers, Environment and Urban Systems</em> 88: 101655. https://doi.org/<a href="https://doi.org/10.1016/j.compenvurbsys.2021.101655">https://doi.org/10.1016/j.compenvurbsys.2021.101655</a>.
</div>
<div id="ref-alma9931" class="csl-entry" role="listitem">
Paschalis, A, TC Chakraborty, S Fatichi, N Meili, and G Manoli. 2021-06. <span>“Urban Forests as Main Regulator of the Evaporative Cooling Effect in Cities,”</span> 2021-06.
</div>
<div id="ref-prata1995thermal" class="csl-entry" role="listitem">
Prata, AJ, V Caselles, C Coll, JA Sobrino, and C Ottle. 1995. <span>“Thermal Remote Sensing of Land Surface Temperature from Satellites: Current Status and Future Prospects.”</span> <em>Remote Sensing Reviews</em> 12 (3-4): 175–224.
</div>
<div id="ref-WANG2019168" class="csl-entry" role="listitem">
Wang, Weimin, Kai Liu, Rong Tang, and Shudong Wang. 2019. <span>“Remote Sensing Image-Based Analysis of the Urban Heat Island Effect in Shenzhen, China.”</span> <em>Physics and Chemistry of the Earth, Parts A/B/C</em> 110: 168–75. https://doi.org/<a href="https://doi.org/10.1016/j.pce.2019.01.002">https://doi.org/10.1016/j.pce.2019.01.002</a>.
</div>
<div id="ref-alma9931576196604761" class="csl-entry" role="listitem">
Zhang, Z, A Paschalis, A Mijic, N Meili, G Manoli, M van Reeuwijk, and S Fatichi. 2022-07-01. <span>“A Mechanistic Assessment of Urban Heat Island Intensities and Drivers Across Climates,”</span> 2022-07-01.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Week8.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification II</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>