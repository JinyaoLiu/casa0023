<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>0023RS - 5&nbsp; Google Earth Engine</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Week7.html" rel="next">
<link href="./Week4.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Week6.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">0023RS</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting started with remote sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Portfolio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data processing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week6.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">temperature</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">5.1</span> Summary</a>
  <ul class="collapse">
  <li><a href="#definition" id="toc-definition" class="nav-link" data-scroll-target="#definition"><span class="header-section-number">5.1.1</span> Definition</a></li>
  <li><a href="#part-1-the-set-up-of-gee" id="toc-part-1-the-set-up-of-gee" class="nav-link" data-scroll-target="#part-1-the-set-up-of-gee"><span class="header-section-number">5.1.2</span> Part 1: The set up of GEE</a></li>
  <li><a href="#part-2-gee-in-action" id="toc-part-2-gee-in-action" class="nav-link" data-scroll-target="#part-2-gee-in-action"><span class="header-section-number">5.1.3</span> Part 2: GEE in action</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">5.2</span> Application</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">5.3</span> Reflection</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">5.4</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">5.1</span> Summary</h2>
<section id="definition" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="definition"><span class="header-section-number">5.1.1</span> Definition</h3>
<ul>
<li>Google Earth Engine: offer “Geospatial” processing service at scale, stores data on servers and takes the code written by prohrammer and applies it</li>
<li>Image = raster, has bands</li>
<li>Feature = vector, has geometry and attributes(dictionary of properties in GEE)</li>
<li>ImageCollection = Image stack</li>
<li>FeatureColletion = Feature stack(lots of polygons)</li>
<li>Image scale: means pixel resolution in GEE, is <em>set by the output</em> not input.</li>
</ul>
</section>
<section id="part-1-the-set-up-of-gee" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="part-1-the-set-up-of-gee"><span class="header-section-number">5.1.2</span> Part 1: The set up of GEE</h3>
<p><big><strong>GEE basic operation</strong></big></p>
<ul>
<li>GEE use JavaScript</li>
<li>Relating spatial data formats we have seen to GEE</li>
<li>Scale(resolution)</li>
<li>Run codes on both the client and server side</li>
</ul>
<p align="center">
</p><p><img src="fig/week6/fig1.png" alt="Alt Text" width="400"></p>
<p></p>
<p align="center">
</p><p><em>map after scale</em></p>
<p></p>
</section>
<section id="part-2-gee-in-action" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="part-2-gee-in-action"><span class="header-section-number">5.1.3</span> Part 2: GEE in action</h3>
<p align="center">
</p><p><img src="fig/week6/fig2.png" alt="Alt Text" width="400"></p>
<p></p>
<p align="center">
</p><p><em>screen of GEE</em></p>
<p></p>
<p>A significant advantage of GEE compared to other software I am familiar with before is that it is very fast and does not require much computing resources (because it is an online website). Like GIS, GEE has a lot of objects(vector, raster, feature, string, number) belongs to different classes with specific GEE functions</p>
<p>The remote sensing operations using R taught in CASA0005 GIS can basically be implemented in GEE, such as spatial operations (including join, partition statistics, filtering images or specific values) and some analysis methods (such as machine learning, classification, deep learning) and output some charts and applications. The specific code is too much not put here, you can see the ppt of this chapter or check the Internet.</p>
</section>
</section>
<section id="application" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="application"><span class="header-section-number">5.2</span> Application</h2>
<p>The Google Earth Engine (GEE) platform offers expanded possibilities for conducting earth observation research. Launched in late 2010, it grants access to a wealth of satellite and supplementary data, alongside cloud computing capabilities and processing algorithms designed to handle large datasets with ease. <span class="citation" data-cites="rs10101509">(<a href="#ref-rs10101509" role="doc-biblioref">Kumar and Mutanga 2018</a>)</span>Its extensive data archive encompasses information from various satellites, as well as vector datasets from Geographic Information Systems (GIS), social and demographic data, weather records, digital elevation models, and climate datasets. This resource empowers scientists, independent researchers, enthusiasts, and nations to delve into this extensive repository of information for tasks such as change detection, trend mapping, and resource quantification on Earth’s surface, surpassing previous capabilities. <span class="citation" data-cites="applicationgee">(<a href="#ref-applicationgee" role="doc-biblioref">Mutanga and Kumar 2019</a>)</span></p>
<p align="center">
</p><p><img src="fig/week6/fig3.png" alt="Alt Text" width="400"></p>
<p></p>
<p align="right">
</p><p><em>Resource from: <span class="citation" data-cites="PhamDuc2023">(<a href="#ref-PhamDuc2023" role="doc-biblioref">Pham-Duc et al. 2023</a>)</span></em></p>
<p></p>
<p align="center">
</p><p><em>The fields of articles used GEE</em></p>
<p></p>
<p>Consequently, the platform’s popularity has surged, reflected in a sharp increase in the number of GEE-related articles, with nearly 85% of them being published within the last three years.<span class="citation" data-cites="PhamDuc2023">(<a href="#ref-PhamDuc2023" role="doc-biblioref">Pham-Duc et al. 2023</a>)</span></p>
<p align="center">
</p><p><img src="fig/week6/fig4.png" alt="Alt Text" width="400"></p>
<p></p>
<p></p>
<p align="right">
</p><p><em>Resource from: <span class="citation" data-cites="PhamDuc2023">(<a href="#ref-PhamDuc2023" role="doc-biblioref">Pham-Duc et al. 2023</a>)</span></em></p>
<p></p>
<p align="center">
</p><p><em>Articles published each year using GEE</em></p>
<p></p>
<p>In addition, by extracting the keywords of these words to make word clouds, it can be seen that the data observed by Landsat, Stneinel-1, MODIS and Sentinel-2 in GEE are widely used in the research.</p>
<p align="center">
</p><p><img src="fig/week6/fig5.png" alt="Alt Text" width="400"></p>
<p></p>
<p></p>
<p align="right">
</p><p><em>Resource from: <span class="citation" data-cites="PhamDuc2023">(<a href="#ref-PhamDuc2023" role="doc-biblioref">Pham-Duc et al. 2023</a>)</span></em></p>
<p></p>
<p align="center">
</p><p><em>World cloud</em></p>
<p></p>
<p>In the field of Earth and Planetary Science, I am very interested in land use analysis <span class="citation" data-cites="LULC">(<a href="#ref-LULC" role="doc-biblioref">Floreano and Moraes Luzia 2021</a>)</span>and crop production analysis<span class="citation" data-cites="VENKATAPPA2021148829">(<a href="#ref-VENKATAPPA2021148829" role="doc-biblioref">Venkatappa et al. 2021</a>)</span>, and the ideas of these two articles happen to be very similar. They all observe changes in the development of remote sensing data by using GEE to visualize it over different time periods, then consider the reasons for the changes, and then consider the impact of some particular event on their research objectives. For example, <span class="citation" data-cites="VENKATAPPA2021148829">Venkatappa et al. (<a href="#ref-VENKATAPPA2021148829" role="doc-biblioref">2021</a>)</span> considers the impact of drought and flood on crop production while <span class="citation" data-cites="LULC">Floreano and Moraes Luzia (<a href="#ref-LULC" role="doc-biblioref">2021</a>)</span> considers whether the promulgation of some policies has an impact on land use.</p>
</section>
<section id="reflection" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">5.3</span> Reflection</h2>
<p>GEE is really a popular platform for remote sensing, probably due to the fact that its operating system is very simple and friendly to most people. Although I was prepared to find many articles before I looked up the application of GEE, the number of articles related to it still shocked me. What is even more shocking to me is that there is even a special category of articles on statistics and analysis of these GEE-related articles, and these articles are published almost every year. From discussing the potential and trend of GEE <span class="citation" data-cites="GORELICK201718 rs10101509">(<a href="#ref-GORELICK201718" role="doc-biblioref">Gorelick et al. 2017</a>; <a href="#ref-rs10101509" role="doc-biblioref">Kumar and Mutanga 2018</a>)</span> to systematically reviewing these texts nearly every year<span class="citation" data-cites="rs13183778 TAMIMINIA2020152">(<a href="#ref-rs13183778" role="doc-biblioref">Zhao et al. 2021</a>; <a href="#ref-TAMIMINIA2020152" role="doc-biblioref">Tamiminia et al. 2020</a>)</span>, and even considering the impact of major events such as covid-19<span class="citation" data-cites="PEREZCUTILLAS2023100907">(<a href="#ref-PEREZCUTILLAS2023100907" role="doc-biblioref">Pérez-Cutillas et al. 2023</a>)</span>, it can be seen that GEE has undoubtedly become a hot spot in remote sensing in recent years.</p>
<p>What worried me was that I hadn’t worked with JavaScript before, and this week’s code, while seemingly basic, still took me a lot of time to understand and find bugs. It seems that GEE will still be needed in the next few weeks of the course, and hopefully I can learn more about JavaScript and how it is used in GEE in the future.</p>
</section>
<section id="references" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="references"><span class="header-section-number">5.4</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-LULC" class="csl-entry" role="listitem">
Floreano, Isabela X., and Alice F. de Moraes Luzia. 2021. <span>“Land Use/Land Cover (LULC) Analysis (2009–2019) with Google Earth Engine and 2030 Prediction Using Markov-CA in the Rondônia State, Brazil.”</span> <em>Environmental Monitoring and Assessment</em> 193 (4). <a href="https://www.proquest.com/scholarly-journals/land-use-cover-lulc-analysis-2009-2019-with/docview/2506944671/se-2">https://www.proquest.com/scholarly-journals/land-use-cover-lulc-analysis-2009-2019-with/docview/2506944671/se-2</a>.
</div>
<div id="ref-GORELICK201718" class="csl-entry" role="listitem">
Gorelick, Noel, Matt Hancher, Mike Dixon, Simon Ilyushchenko, David Thau, and Rebecca Moore. 2017. <span>“Google Earth Engine: Planetary-Scale Geospatial Analysis for Everyone.”</span> <em>Remote Sensing of Environment</em> 202: 18–27. https://doi.org/<a href="https://doi.org/10.1016/j.rse.2017.06.031">https://doi.org/10.1016/j.rse.2017.06.031</a>.
</div>
<div id="ref-rs10101509" class="csl-entry" role="listitem">
Kumar, Lalit, and Onisimo Mutanga. 2018. <span>“Google Earth Engine Applications Since Inception: Usage, Trends, and Potential.”</span> <em>Remote Sensing</em> 10 (10). <a href="https://doi.org/10.3390/rs10101509">https://doi.org/10.3390/rs10101509</a>.
</div>
<div id="ref-applicationgee" class="csl-entry" role="listitem">
Mutanga, Onisimo, and Lalit Kumar. 2019. <span>“Google Earth Engine Applications.”</span> <em>Remote Sensing</em> 11 (5). <a href="https://www.proquest.com/scholarly-journals/google-earth-engine-applications/docview/2303995980/se-2">https://www.proquest.com/scholarly-journals/google-earth-engine-applications/docview/2303995980/se-2</a>.
</div>
<div id="ref-PEREZCUTILLAS2023100907" class="csl-entry" role="listitem">
Pérez-Cutillas, Pedro, Alberto Pérez-Navarro, Carmelo Conesa-García, Demetrio Antonio Zema, and Jesús Pilar Amado-Álvarez. 2023. <span>“What Is Going on Within Google Earth Engine? A Systematic Review and Meta-Analysis.”</span> <em>Remote Sensing Applications: Society and Environment</em> 29: 100907. https://doi.org/<a href="https://doi.org/10.1016/j.rsase.2022.100907">https://doi.org/10.1016/j.rsase.2022.100907</a>.
</div>
<div id="ref-PhamDuc2023" class="csl-entry" role="listitem">
Pham-Duc, B., H. Nguyen, H. Phan, and et al. 2023. <span>“Trends and Applications of Google Earth Engine in Remote Sensing and Earth Science Research: A Bibliometric Analysis Using Scopus Database.”</span> <em>Earth Science Informatics</em> 16: 2355–71. <a href="https://doi.org/10.1007/s12145-023-01035-2">https://doi.org/10.1007/s12145-023-01035-2</a>.
</div>
<div id="ref-TAMIMINIA2020152" class="csl-entry" role="listitem">
Tamiminia, Haifa, Bahram Salehi, Masoud Mahdianpari, Lindi Quackenbush, Sarina Adeli, and Brian Brisco. 2020. <span>“Google Earth Engine for Geo-Big Data Applications: A Meta-Analysis and Systematic Review.”</span> <em>ISPRS Journal of Photogrammetry and Remote Sensing</em> 164: 152–70. https://doi.org/<a href="https://doi.org/10.1016/j.isprsjprs.2020.04.001">https://doi.org/10.1016/j.isprsjprs.2020.04.001</a>.
</div>
<div id="ref-VENKATAPPA2021148829" class="csl-entry" role="listitem">
Venkatappa, Manjunatha, Nophea Sasaki, Phoumin Han, and Issei Abe. 2021. <span>“Impacts of Droughts and Floods on Croplands and Crop Production in Southeast Asia – an Application of Google Earth Engine.”</span> <em>Science of The Total Environment</em> 795: 148829. https://doi.org/<a href="https://doi.org/10.1016/j.scitotenv.2021.148829">https://doi.org/10.1016/j.scitotenv.2021.148829</a>.
</div>
<div id="ref-rs13183778" class="csl-entry" role="listitem">
Zhao, Qiang, Le Yu, Xuecao Li, Dailiang Peng, Yongguang Zhang, and Peng Gong. 2021. <span>“Progress and Trends in the Application of Google Earth and Google Earth Engine.”</span> <em>Remote Sensing</em> 13 (18). <a href="https://doi.org/10.3390/rs13183778">https://doi.org/10.3390/rs13183778</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Week4.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Week7.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification I</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>